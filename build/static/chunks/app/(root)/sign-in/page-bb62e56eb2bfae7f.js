(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{32:function(e,t,s){Promise.resolve().then(s.bind(s,5669))},5669:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(9533),a=s(1229),n=s(9423),i=s(6411),l=s(5432),o=s(6353),d=e=>{let{phone:t,setPhone:s,setCurrentState:d}=e,[c,u]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1),h=async()=>{try{f(!0);let e=await fetch("/api/auth/login",{method:"POST",body:JSON.stringify({phone:t})}).then(e=>e.json());if(f(!1),!e.ok)return(0,l.Am)({title:"Error",description:e.error||"Something went wrong",variant:"destructive"});if((0,l.Am)({title:e.data.otp}),!e.data.user.onBoarded)return d("OnBoarding");d("VerifyOTP")}catch(e){f(!1),(0,l.Am)({title:"Error",description:"Something went wrong",variant:"destructive"})}};return(0,a.useEffect)(()=>{t.length>0&&t.length<10||t.length>10?u("Phone number should be of 10 digits"):u("")},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"text-lg font-bold",children:"Sign In / Sign Up"}),(0,r.jsx)("p",{className:"text-sm",children:"Join our community & get exclusive offers"}),(0,r.jsxs)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full  mt-10",children:[(0,r.jsx)("span",{className:"text-sm font-semibold",children:"+91"}),(0,r.jsx)(i.I,{type:"tel",placeholder:"Enter Mobile Number",className:"border-none focus-visible:ring-transparent shadow-none text-base font-semibold w-full ml-2",value:t,onChange:e=>{e.target.value.length>10||s(e.target.value.replace(/[^0-9]/g,""))}})]}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:c}),(0,r.jsx)(n.z,{disabled:10!==t.length||m,className:"text-base uppercase font-semibold mt-5",onClick:h,children:m?"Signing in...":"Continue"}),(0,r.jsx)("div",{className:"border-[0.5px] border-light-3 my-6"}),(0,r.jsxs)("p",{className:"text-sm text-light-1 text-center",children:["By creating an account or signing in, you agree with ",(0,r.jsx)("br",{className:"hidden mobile:block"})," our"," ",(0,r.jsx)(o.default,{href:"#",className:"text-blue-800 font-semibold",children:"Terms and Conditions"})," ","and"," ",(0,r.jsx)(o.default,{href:"#",className:"text-blue-800 font-semibold",children:"Privacy Policy"})]})]})},c=s(1250),u=s(5187),m=s(2634),f=s(2299);let h=a.forwardRef((e,t)=>{let{className:s,containerClassName:a,...n}=e;return(0,r.jsx)(m.uZ,{ref:t,containerClassName:(0,f.cn)("flex items-center gap-2 has-[:disabled]:opacity-50",a),className:(0,f.cn)("disabled:cursor-not-allowed",s),...n})});h.displayName="InputOTP";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,f.cn)("flex items-center",s),...a})});x.displayName="InputOTPGroup";let g=a.forwardRef((e,t)=>{let{index:s,className:n,...i}=e,{char:l,hasFakeCaret:o,isActive:d}=a.useContext(m.VM).slots[s];return(0,r.jsxs)("div",{ref:t,className:(0,f.cn)("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",d&&"z-10 ring-1 ring-ring",n),...i,children:[l,o&&(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});g.displayName="InputOTPSlot";let b=a.forwardRef((e,t)=>{let{...s}=e;return(0,r.jsx)("div",{ref:t,role:"separator",...s,children:(0,r.jsx)(u.yhV,{})})});b.displayName="InputOTPSeparator";var p=s(5647),N=s(832),j=e=>{let{phone:t,setCurrentState:s}=e,i=(0,c.useRouter)(),d=(0,c.useSearchParams)(),{setUser:f,setToken:j}=(0,p.L)(),{setCart:v,setWishlist:y}=(0,N.a)(),[S,w]=(0,a.useState)(""),[O,T]=(0,a.useState)(!1),I=async()=>{try{T(!0);let e=await fetch("/api/auth/verify-otp",{method:"POST",body:JSON.stringify({phone:t,otp:S})}).then(e=>e.json());if(!e.ok){T(!1),(0,l.Am)({title:"Error",description:e.error||"Something went wrong",variant:"destructive"});return}f(e.data.user),v(e.data.user.cart),y(e.data.user.wishlist),j({access:e.data.accessToken,refresh:e.data.refreshToken}),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("cart",JSON.stringify(e.data.user.cart)),localStorage.setItem("wishlist",JSON.stringify(e.data.user.wishlist)),localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken),T(!1);let s=d.get("src");s&&i.replace(s)}catch(e){console.log(e.message),(0,l.Am)({title:"Error",description:"Something went wrong",variant:"destructive"})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.Y4O,{className:"w-5 h-5 cursor-pointer",onClick:()=>s("SignIn")}),(0,r.jsx)("h1",{className:"text-lg font-bold",children:"Verify OTP"})]}),(0,r.jsxs)("p",{className:"text-sm mb-5",children:["Enter the OTP sent to ",t," ",(0,r.jsx)("span",{className:"text-blue-800 font-semibold cursor-pointer",onClick:()=>s("SignIn"),children:"Change"})]}),(0,r.jsx)(h,{maxLength:4,pattern:m.K2,onChange:e=>w(e),children:(0,r.jsxs)(x,{className:"rounded-none border-none",children:[(0,r.jsx)(g,{index:0,className:"rounded-md border border-primary"}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{index:1,className:"rounded-md border border-primary"}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{index:2,className:"rounded-md border border-primary"}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{index:3,className:"rounded-md border border-primary"})]})}),(0,r.jsx)(n.z,{disabled:10!==t.length||O,className:"text-base uppercase font-semibold mt-5",onClick:I,children:O?"Verifying...":"Continue"}),(0,r.jsx)("div",{className:"border-[0.5px] border-light-3 my-6"}),(0,r.jsxs)("p",{className:"text-sm text-light-1 text-center",children:["By creating an account or signing in, you agree with ",(0,r.jsx)("br",{className:"hidden mobile:block"})," our"," ",(0,r.jsx)(o.default,{href:"#",className:"text-blue-800 font-semibold",children:"Terms and Conditions"})," ","and"," ",(0,r.jsx)(o.default,{href:"#",className:"text-blue-800 font-semibold",children:"Privacy Policy"})]})]})},v=s(7644),y=e=>{let{phone:t,setCurrentState:s}=e,d=(0,c.useRouter)(),f=(0,c.useSearchParams)(),{setUser:j,setToken:y}=(0,p.L)(),{setCart:S,setWishlist:w}=(0,N.a)(),[O,T]=(0,a.useState)(""),[I,k]=(0,a.useState)(""),[C,E]=(0,a.useState)(""),[P,A]=(0,a.useState)(""),[J,_]=(0,a.useState)(!1),M=async()=>{try{_(!0);let e=await fetch("/api/auth/onboarding",{method:"POST",body:JSON.stringify({phone:t,name:O,email:I,otp:P,gender:C})}).then(e=>e.json());if(!e.ok){(0,l.Am)({title:"Error",description:e.error||"Something went wrong",variant:"destructive"});return}j(e.data.user),S(e.data.user.cart),w(e.data.user.wishlist),y({access:e.data.accessToken,refresh:e.data.refreshToken}),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("cart",JSON.stringify(e.data.user.cart)),localStorage.setItem("wishlist",JSON.stringify(e.data.user.wishlist)),localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken),_(!1);let s=f.get("src");s&&d.replace(s)}catch(e){console.log(e.message),(0,l.Am)({title:"Error",description:"Something went wrong",variant:"destructive"})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.Y4O,{className:"w-5 h-5 cursor-pointer",onClick:()=>s("SignIn")}),(0,r.jsx)("h1",{className:"text-lg font-bold",children:"OnBoarding..."})]}),(0,r.jsx)("p",{className:"text-sm",children:"Please complete your profile."}),(0,r.jsx)("span",{className:"text-sm font-semibold mt-5",children:"Name"}),(0,r.jsxs)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full",children:[(0,r.jsx)("span",{className:"text-sm font-semibold ml-1",children:(0,r.jsx)(u.Tk0,{className:"w-5 h-5"})}),(0,r.jsx)(i.I,{placeholder:"Enter Your Full Name",className:"border-none focus-visible:ring-transparent shadow-none text-base font-semibold w-full ml-2",value:O,onChange:e=>T(e.target.value)})]}),(0,r.jsx)("span",{className:"text-sm font-semibold mt-5",children:"Phone"}),(0,r.jsxs)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full",children:[(0,r.jsx)("span",{className:"text-sm font-semibold",children:"+91"}),(0,r.jsx)(i.I,{placeholder:"Enter Mobile Number",className:"border-none focus-visible:ring-transparent shadow-none text-base font-semibold w-full ml-2",value:t,disabled:!0})]}),(0,r.jsx)("span",{className:"text-sm font-semibold mt-5",children:"Email"}),(0,r.jsxs)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full",children:[(0,r.jsx)("span",{className:"text-sm font-semibold ml-1",children:(0,r.jsx)(v.WNJ,{className:"w-5 h-5"})}),(0,r.jsx)(i.I,{type:"email",placeholder:"Enter Your Email",className:"border-none focus-visible:ring-transparent shadow-none text-base font-semibold w-full ml-2",value:I,onChange:e=>k(e.target.value)})]}),(0,r.jsx)("span",{className:"text-sm font-semibold mt-5",children:"Gender"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full h-10 cursor-pointer ".concat("Male"===C&&"bg-primary text-background"),onClick:()=>E("Male"),children:(0,r.jsxs)("span",{className:"flex gap-5 text-sm font-semibold ml-1",children:[(0,r.jsx)(v.rtt,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"Male"})]})}),(0,r.jsx)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full h-10 cursor-pointer ".concat("Female"===C&&"bg-primary text-background"),onClick:()=>E("Female"),children:(0,r.jsxs)("span",{className:"flex gap-5 text-sm font-semibold ml-1",children:[(0,r.jsx)(v.j9e,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"Female"})]})}),(0,r.jsx)("div",{className:"border border-light-1 rounded-md p-1 flex items-center w-full h-10 cursor-pointer ".concat("Other"===C&&"bg-primary text-background"),onClick:()=>E("Other"),children:(0,r.jsxs)("span",{className:"flex gap-5 text-sm font-semibold ml-1",children:[(0,r.jsx)(v.Qrn,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"Other"})]})})]}),(0,r.jsx)("span",{className:"text-sm font-semibold mt-5",children:"OTP"}),(0,r.jsxs)("p",{className:"text-sm mb-2",children:["Enter the OTP sent to ",t," ",(0,r.jsx)("span",{className:"text-blue-800 font-semibold cursor-pointer",onClick:()=>s("SignIn"),children:"Change"})]}),(0,r.jsx)(h,{maxLength:4,pattern:m.K2,onChange:e=>A(e),children:(0,r.jsxs)(x,{className:"rounded-none border-none",children:[(0,r.jsx)(g,{index:0,className:"rounded-md border border-primary"}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{index:1,className:"rounded-md border border-primary"}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{index:2,className:"rounded-md border border-primary"}),(0,r.jsx)(b,{}),(0,r.jsx)(g,{index:3,className:"rounded-md border border-primary"})]})}),(0,r.jsx)(n.z,{disabled:!O||!I||!C||!P||J,className:"text-base uppercase font-semibold mt-10",onClick:M,children:J?"Verifying...":"Continue"}),(0,r.jsx)("div",{className:"border-[0.5px] border-light-3 my-6"}),(0,r.jsxs)("p",{className:"text-sm text-light-1 text-center",children:["By creating an account or signing in, you agree with ",(0,r.jsx)("br",{className:"hidden mobile:block"})," our"," ",(0,r.jsx)(o.default,{href:"#",className:"text-blue-800 font-semibold",children:"Terms and Conditions"})," ","and"," ",(0,r.jsx)(o.default,{href:"#",className:"text-blue-800 font-semibold",children:"Privacy Policy"})]})]})},S=s(8911),w=()=>{let e=(0,c.useSearchParams)(),t=(0,c.useRouter)(),{user:s,isLoading:n}=(0,S.a)(),[i,l]=(0,a.useState)("SignIn"),[o,u]=(0,a.useState)("");return(0,a.useEffect)(()=>{!n&&s&&t.replace(e.get("src")||"/")},[]),(0,r.jsx)("div",{className:"max-w-desktop mx-auto h-[calc(100vh-100px)]",children:(0,r.jsxs)("div",{className:"flex flex-col tablet:flex-row overflow-hidden h-full",children:[(0,r.jsx)("div",{className:"w-full h-full tablet:w-1/2 p-2"}),(0,r.jsx)("div",{className:"hidden tablet:block border-[0.1px] border-light-3"}),(0,r.jsxs)("div",{className:"fixed tablet:relative bottom-0 left-0 right-0 bg-background rounded-t-xl flex flex-col justify-center h-max w-full tablet:max-w-[450px] m-auto p-2 tablet:p-5 py-8",children:["SignIn"===i&&(0,r.jsx)(d,{setPhone:u,phone:o,setCurrentState:l}),"VerifyOTP"===i&&(0,r.jsx)(j,{phone:o,setCurrentState:l}),"OnBoarding"===i&&(0,r.jsx)(y,{phone:o,setCurrentState:l})]})]})})}},9423:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(9533),a=s(1229),n=s(9376),i=s(2911),l=s(2299);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},6411:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(9533),a=s(1229),n=s(2299);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},5432:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return m}});var r=s(1229);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8911:function(e,t,s){"use strict";s.d(t,{a:function(){return n}});var r=s(5647),a=s(1229);let n=()=>{let{user:e,setUser:t,token:s,setToken:n}=(0,r.L)(),[i,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{if(!e){let e=localStorage.getItem("user"),s=localStorage.getItem("accessToken"),r=localStorage.getItem("refreshToken");e&&t(JSON.parse(e)),s&&r&&n({access:s,refresh:r})}l(!1)})()},[e]),{user:e,isLoading:i,token:s}}},2299:function(e,t,s){"use strict";s.d(t,{_:function(){return i},cn:function(){return n},s:function(){return l}});var r=s(7494),a=s(2611);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}let i=e=>fetch(e).then(e=>e.json()),l={revalidateOnFocus:!1,dedupingInterval:6e4,revalidateOnMount:!1}},832:function(e,t,s){"use strict";s.d(t,{a:function(){return d},c:function(){return o}});var r=s(4752);let a=[],n={sizes:[],attributes:[],colors:[]},i=[],l=[],o=(e,t)=>e.find(e=>e.id===t.id)?e.map(e=>e.id===t.id?{...e,quantity:e.quantity+t.quantity}:e):[...e,t],d=(0,r.Ue)(e=>({filterProperties:n,setFilterProperties:t=>e({filterProperties:t}),categories:a,setCategories:t=>e({categories:t}),cart:i,setCart:t=>e({cart:t}),addToCart:t=>{e(e=>{let s=o(e.cart,t);return localStorage.setItem("cart",JSON.stringify(s)),{cart:s}})},removeFromCart:t=>e(e=>{let s=e.cart.filter(e=>e.id!==t.id);return localStorage.setItem("cart",JSON.stringify(s)),{cart:s}}),updateQuantity:(t,s)=>e(e=>{let r=e.cart.map(e=>e.id===t?{...e,quantity:s}:e);return localStorage.setItem("cart",JSON.stringify(r)),{cart:r}}),wishlist:l,setWishlist:t=>e({wishlist:t}),addToWishlist:t=>e(e=>{let s=[...e.wishlist,t];return localStorage.setItem("wishlist",JSON.stringify(s)),{wishlist:s}}),removeFromWishlist:t=>e(e=>{let s=e.wishlist.filter(e=>e.id!==t);return localStorage.setItem("wishlist",JSON.stringify(s)),{wishlist:s}})}))},5647:function(e,t,s){"use strict";s.d(t,{L:function(){return r}});let r=(0,s(4752).Ue)(e=>({user:null,setUser:t=>e({user:t}),token:{access:null,refresh:null},setToken:t=>e({token:t}),addAddress:t=>e(e=>{var s;if(!e.user)return{user:null};let r={...e.user,addresses:[...(null===(s=e.user)||void 0===s?void 0:s.addresses)||[],t]};return localStorage.setItem("user",JSON.stringify(r)),{user:r}}),updateAddress:t=>e(e=>{var s,r;if(!e.user)return{user:null};let a={...e.user,addresses:null===(r=e.user)||void 0===r?void 0:null===(s=r.addresses)||void 0===s?void 0:s.map(e=>e.id===t.id?t:e)};return localStorage.setItem("user",JSON.stringify(a)),{user:a}}),deleteAddress:t=>e(e=>{var s,r;if(!e.user)return{user:null};let a={...e.user,addresses:null===(r=e.user)||void 0===r?void 0:null===(s=r.addresses)||void 0===s?void 0:s.filter(e=>e.id!==t)};return localStorage.setItem("user",JSON.stringify(a)),{user:a}})}))}},function(e){e.O(0,[792,582,773,353,903,170,842,744],function(){return e(e.s=32)}),_N_E=e.O()}]);